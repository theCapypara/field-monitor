{
  "id": "de.capypara.FieldMonitor",
  "runtime": "org.gnome.Platform",
  "runtime-version": "49",
  "sdk": "org.gnome.Sdk",
  "sdk-extensions": [
    "org.freedesktop.Sdk.Extension.rust-stable"
  ],
  "command": "de.capypara.FieldMonitor",
  "finish-args": [
    "--share=network",
    "--share=ipc",
    "--socket=fallback-x11",
    "--socket=ssh-auth",
    "--device=dri",
    "--socket=wayland",
    "--socket=pulseaudio",
    "--filesystem=~/.ssh/known_hosts:ro",
    "--filesystem=xdg-run/libvirt",
    "--filesystem=/run/libvirt",
    "--env=RUST_LOG=field_monitor=info,libfieldmonitor=info,Adwaita=info,GLib=info,warning"
  ],
  "build-options": {
    "append-path": "/usr/lib/sdk/rust-stable/bin",
    "build-args": [
      "--share=network"
    ],
    "env": {
      "RUST_BACKTRACE": "1"
    }
  },
  "cleanup": [
    "/include",
    "/lib/pkgconfig",
    "/man",
    "/share/doc",
    "/share/gtk-doc",
    "/share/man",
    "/share/pkgconfig",
    "*.la",
    "*.a"
  ],
  "cleanup-commands": [
    "rm -rf /app/var/run/libvirt",
    "mkdir -p /app/var/run",
    "ln -s /var/run/libvirt /app/var/run/libvirt"
  ],
  "modules": [
    {
      "name": "libusb",
      "config-opts": [
        "--disable-udev"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/libusb/libusb/releases/download/v1.0.29/libusb-1.0.29.tar.bz2",
          "sha256": "5977fc950f8d1395ccea9bd48c06b3f808fd3c2c961b44b0c2e6e29fc3a70a85"
        }
      ]
    },
    {
      "name": "usbredir",
      "buildsystem": "meson",
      "config-opts": [
        "--buildtype=release"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://www.spice-space.org/download/usbredir/usbredir-0.15.0.tar.xz",
          "sha256": "6dc2a380277688a068191245dac2ab7063a552999d8ac3ad8e841c10ff050961"
        }
      ]
    },
    {
      "name": "gtk-vnc",
      "buildsystem": "meson",
      "config-opts": [
        "--buildtype=release",
        "-Dpulseaudio=enabled"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/gtk-vnc/1.5/gtk-vnc-1.5.0.tar.xz",
          "sha256": "c0beb4747528ad931da43acc567c6a0190f7fc624465571ed9ccece02c34dd23"
        }
      ]
    },
    {
      "name": "spice-gtk",
      "buildsystem": "meson",
      "build-options": {
        "env": {
          "PYTHONPATH": "/app"
        }
      },
      "config-opts": [
        "--buildtype=release",
        "-Dvapi=enabled",
        "-Dwebdav=enabled",
        "-Dpolkit=disabled",
        "-Dusbredir=disabled",
        "-Dgtk_doc=disabled"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://www.spice-space.org/download/gtk/spice-gtk-0.42.tar.xz",
          "sha256": "9380117f1811ad1faa1812cb6602479b6290d4a0d8cc442d44427f7f6c0e7a58"
        }
      ],
      "modules": [
        {
          "name": "spice-protocol",
          "buildsystem": "meson",
          "sources": [
            {
              "type": "archive",
              "url": "https://www.spice-space.org/download/releases/spice-protocol-0.14.3.tar.xz",
              "sha256": "f986e5bc2a1598532c4897f889afb0df9257ac21c160c083703ae7c8de99487a"
            }
          ]
        },
        {
          "name": "phodav",
          "buildsystem": "meson",
          "config-opts": [
            "-Dsystemdsystemunitdir=/app/lib/systemd/system",
            "-Dudevrulesdir=usr/lib/udev/rules.d"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://download.gnome.org/sources/phodav/3.0/phodav-3.0.tar.xz",
              "sha256": "392ec2d06d50300dcff1ef269a2a985304e29bce3520002fca29f2edc1d138d1"
            }
          ]
        },
        {
          "name": "python-pyparsing",
          "buildsystem": "simple",
          "build-commands": [
            "pip3 install --prefix=/app pyparsing-2.4.6-py2.py3-none-any.whl"
          ],
          "sources": [
            {
              "type": "file",
              "url": "https://files.pythonhosted.org/packages/5d/bc/1e58593167fade7b544bfe9502a26dc860940a79ab306e651e7f13be68c2/pyparsing-2.4.6-py2.py3-none-any.whl",
              "sha256": "c342dccb5250c08d45fd6f8b4a559613ca603b57498511740e65cd11a2e7dcec"
            }
          ]
        },
        {
          "name": "python-six",
          "buildsystem": "simple",
          "build-commands": [
            "pip3 install --prefix=/app six-1.17.0-py2.py3-none-any.whl"
          ],
          "sources": [
            {
              "type": "file",
              "url": "https://files.pythonhosted.org/packages/b7/ce/149a00dd41f10bc29e5921b496af8b574d8413afcd5e30dfa0ed46c2cc5e/six-1.17.0-py2.py3-none-any.whl",
              "sha256": "4721f391ed90541fddacab5acf947aa0d3dc7d27b2e1e8eda2be8970586c3274"
            }
          ]
        },
        {
          "name": "libcacard",
          "sources": [
            {
              "type": "archive",
              "url": "https://www.spice-space.org/download/libcacard/libcacard-2.8.1.tar.xz",
              "sha256": "fbbf4de8cb7db5bdff5ecb672ff0dbe6939fb9f344b900d51ba6295329a332e7"
            }
          ]
        },
        {
          "name": "spice",
          "buildsystem": "autotools",
          "config-opts": [
            "--disable-lz4",
            "--disable-manual",
            "--disable-test"
          ],
          "sources": [
            {
              "type": "archive",
              "url": "https://www.spice-space.org/download/releases/spice-0.15.1.tar.bz2",
              "sha256": "ada9af67ab321916bd7eb59e3d619a4a7796c08a28c732edfc7f02fc80b1a37a"
            }
          ]
        }
      ]
    },
    {
      "name": "vte",
      "buildsystem": "meson",
      "config-opts": [
        "--buildtype=release",
        "-Ddocs=false",
        "-Dgtk3=false",
        "-Dgtk4=true",
        "-Dvapi=true",
        "-Dglade=false"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.gnome.org/sources/vte/0.82/vte-0.82.1.tar.xz",
          "sha256": "79376d70402d271e2d38424418e1aea72357934d272e321e3906b71706a78e3a"
        }
      ]
    },
    {
      "name": "json-c",
      "buildsystem": "cmake-ninja",
      "config-opts": [
        "-DCMAKE_POLICY_VERSION_MINIMUM=3.5"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://github.com/json-c/json-c/archive/refs/tags/json-c-0.18-20240915.tar.gz",
          "sha256": "3112c1f25d39eca661fe3fc663431e130cc6e2f900c081738317fba49d29e298"
        }
      ]
    },
    {
      "name": "libtirpc",
      "buildsystem": "autotools",
      "sources": [
        {
          "type": "archive",
          "url": "https://downloads.sourceforge.net/libtirpc/libtirpc-1.3.7.tar.bz2",
          "sha256": "b47d3ac19d3549e54a05d0019a6c400674da716123858cfdb6d3bdd70a66c702"
        }
      ]
    },
    {
      "name": "libvirt",
      "buildsystem": "meson",
      "config-opts": [
        "-Ddriver_remote=enabled",
        "-Ddriver_libvirtd=enabled",
        "-Ddriver_qemu=enabled",
        "-Ddocs=disabled",
        "-Dtests=disabled"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://download.libvirt.org/libvirt-11.9.0.tar.xz",
          "sha256": "104f70ee591e72989d4f8c6caa79ed9dacd5dc84efdb0125b848afe544ad0c2d"
        }
      ]
    },
    {
      "name": "field-monitor",
      "builddir": true,
      "buildsystem": "meson",
      "config-opts": [
        "--buildtype=release"
      ],
      "sources": [
        {
          "type": "dir",
          "path": "../.."
        }
      ]
    }
  ]
}
